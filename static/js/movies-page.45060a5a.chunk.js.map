{"version":3,"sources":["pages/MoviesPage/MoviesPage.jsx","services/ApiService/ApiService.jsx","img/no-img.jpg","components/MovieList/MovieList.jsx","../node_modules/query-string/index.js","../node_modules/strict-uri-encode/index.js"],"names":["apiService","ApiService","MoviesPage","qs","QueryString","parse","props","location","search","state","query","movies","isLoading","fetchMovies","setState","getMoviesOnSearch","then","data","catch","e","console","log","finally","history","push","handleSubmit","preventDefault","target","reset","handleInputChange","value","this","onSubmit","className","onChange","type","length","pathname","items","Component","axios","defaults","baseURL","get","response","results","movieId","cast","MovieList","map","el","to","id","src","poster_path","img","alt","title","strictUriEncode","require","objectAssign","encode","opts","strict","encodeURIComponent","keysSorter","input","Array","isArray","sort","Object","keys","a","b","Number","key","exports","extract","str","split","formatter","result","arrayFormat","accumulator","exec","replace","undefined","concat","parserForArrayFormat","ret","create","trim","forEach","param","parts","shift","val","join","decodeURIComponent","reduce","Boolean","stringify","obj","index","encoderForArrayFormat","slice","val2","filter","x","module","c","charCodeAt","toString","toUpperCase"],"mappings":"iOAKMA,EAAa,IAAIC,IACjBC,E,4MACJC,GAAKC,IAAYC,MAAM,EAAKC,MAAMC,SAASC,Q,EAC3CC,MAAQ,CACNC,MAAO,EAAKP,GAAGO,OAAS,GACxBC,OAAQ,GACRC,WAAW,G,EAQbC,YAAc,WACZ,EAAKC,SAAS,CAAEF,WAAW,IAC3BZ,EACGe,kBAAkB,EAAKN,MAAMC,OAC7BM,MAAK,SAAAC,GACJ,EAAKH,SAAS,CACZH,OAAQM,OAGXC,OAAM,SAAAC,GAAC,OAAIC,QAAQC,IAAIF,MACvBG,SAAQ,WACP,EAAKR,SAAS,CAAEF,WAAW,OAE3B,EAAKH,MAAMC,OACb,EAAKJ,MAAMiB,QAAQC,KAAK,CACtBhB,OAAO,SAAD,OAAW,EAAKC,MAAMC,U,EAIlCe,aAAe,SAAAN,GACbA,EAAEO,iBACF,EAAKb,cACLM,EAAEQ,OAAOC,S,EAEXC,kBAAoB,SAAAV,GAClB,EAAKL,SAAS,CACZJ,MAAOS,EAAEQ,OAAOG,S,uDAhCpB,WACMC,KAAKtB,MAAMC,OACbqB,KAAKlB,gB,oBAkCT,WACE,OACE,qCACE,uBAAMmB,SAAUD,KAAKN,aAAcQ,UAAU,aAA7C,UACE,uBAAOC,SAAUH,KAAKF,kBAAmBI,UAAU,UACnD,wBAAQE,KAAK,SAASF,UAAU,mBAAhC,uBAIDF,KAAKtB,MAAMG,WAAa,2CACxBmB,KAAKtB,MAAME,OAAOyB,OAAS,GAC1B,cAAC,IAAD,CACEC,SAAUN,KAAKzB,MAAMC,SAAS8B,SAC9B3B,MAAOqB,KAAKtB,MAAMC,MAClB4B,MAAOP,KAAKtB,MAAME,gB,GAzDL4B,aAqEVrC,a,qGCzEfsC,IAAMC,SAASC,QAAU,+B,IAEJzC,E,gGACnB,WACE,OAAOuC,IACJG,IAAI,+DACJ3B,MAAK,SAAA4B,GAAQ,OAAIA,EAAS3B,KAAK4B,a,+BAGpC,SAAkBnC,GAChB,OAAO8B,IACJG,IADI,uEAE6DjC,IAEjEM,MAAK,SAAA4B,GAAQ,OAAIA,EAAS3B,KAAK4B,a,0BAEpC,SAAaC,GACX,OAAON,IACJG,IADI,iBACUG,EADV,8CAEJ9B,MAAK,SAAA4B,GAAQ,OAAIA,EAAS3B,U,6BAE/B,SAAgB6B,GACd,OAAON,IACJG,IADI,iBACUG,EADV,sDAEJ9B,MAAK,SAAA4B,GAAQ,OAAIA,EAAS3B,KAAK8B,U,6BAEpC,SAAgBD,GACd,OAAON,IACJG,IADI,iBACUG,EADV,sDAEJ9B,MAAK,SAAA4B,GAAQ,OAAIA,EAAS3B,KAAK4B,e,sCC/BvB,QAA0B,oC,gCCAzC,2BA6CeG,IAzCG,SAAC,GAAgC,IAA9BV,EAA6B,EAA7BA,MAAO5B,EAAsB,EAAtBA,MAAO2B,EAAe,EAAfA,SACjC,OACE,oBAAIJ,UAAU,cAAd,SACGK,EAAMW,KAAI,SAAAC,GACT,OACE,oBAAIjB,UAAU,cAAd,SACE,cAAC,IAAD,CACEA,UAAU,cACVkB,GAAI,CACFd,SAAS,WAAD,OAAaa,EAAGE,IACxB3C,MAAO,CACLC,QACA2B,aANN,SAUE,sBAAKJ,UAAU,UAAf,UACE,qBACEA,UAAU,aACVoB,IACEH,EAAGI,YAAH,0CACuCJ,EAAGI,aACtCC,IAENC,IAAI,KAEN,6BAAKN,EAAGO,cArBmBP,EAAGE,W,gCCR9C,IAAIM,EAAkBC,EAAQ,IAC1BC,EAAeD,EAAQ,IA0F3B,SAASE,EAAO/B,EAAOgC,GACtB,OAAIA,EAAKD,OACDC,EAAKC,OAASL,EAAgB5B,GAASkC,mBAAmBlC,GAG3DA,EAGR,SAASmC,EAAWC,GACnB,OAAIC,MAAMC,QAAQF,GACVA,EAAMG,OACc,kBAAVH,EACVD,EAAWK,OAAOC,KAAKL,IAAQG,MAAK,SAAUG,EAAGC,GACvD,OAAOC,OAAOF,GAAKE,OAAOD,MACxBxB,KAAI,SAAU0B,GAChB,OAAOT,EAAMS,MAIRT,EAGRU,EAAQC,QAAU,SAAUC,GAC3B,OAAOA,EAAIC,MAAM,KAAK,IAAM,IAG7BH,EAAQvE,MAAQ,SAAUyE,EAAKhB,GAG9B,IAAIkB,EA/EL,SAA8BlB,GAC7B,IAAImB,EAEJ,OAAQnB,EAAKoB,aACZ,IAAK,QACJ,OAAO,SAAUP,EAAK7C,EAAOqD,GAC5BF,EAAS,aAAaG,KAAKT,GAE3BA,EAAMA,EAAIU,QAAQ,WAAY,IAEzBJ,QAKoBK,IAArBH,EAAYR,KACfQ,EAAYR,GAAO,IAGpBQ,EAAYR,GAAKM,EAAO,IAAMnD,GAR7BqD,EAAYR,GAAO7C,GAWtB,IAAK,UACJ,OAAO,SAAU6C,EAAK7C,EAAOqD,GAC5BF,EAAS,UAAUG,KAAKT,GACxBA,EAAMA,EAAIU,QAAQ,QAAS,IAEtBJ,OAG2BK,IAArBH,EAAYR,GAKvBQ,EAAYR,GAAO,GAAGY,OAAOJ,EAAYR,GAAM7C,GAJ9CqD,EAAYR,GAAO,CAAC7C,GAHpBqD,EAAYR,GAAO7C,GAUtB,QACC,OAAO,SAAU6C,EAAK7C,EAAOqD,QACHG,IAArBH,EAAYR,GAKhBQ,EAAYR,GAAO,GAAGY,OAAOJ,EAAYR,GAAM7C,GAJ9CqD,EAAYR,GAAO7C,IAsCP0D,CAFhB1B,EAAOF,EAAa,CAACsB,YAAa,QAASpB,IAMvC2B,EAAMnB,OAAOoB,OAAO,MAExB,MAAmB,kBAARZ,EACHW,GAGRX,EAAMA,EAAIa,OAAON,QAAQ,YAAa,MAMtCP,EAAIC,MAAM,KAAKa,SAAQ,SAAUC,GAChC,IAAIC,EAAQD,EAAMR,QAAQ,MAAO,KAAKN,MAAM,KAGxCJ,EAAMmB,EAAMC,QACZC,EAAMF,EAAM1D,OAAS,EAAI0D,EAAMG,KAAK,UAAOX,EAI/CU,OAAcV,IAARU,EAAoB,KAAOE,mBAAmBF,GAEpDhB,EAAUkB,mBAAmBvB,GAAMqB,EAAKP,MAGlCnB,OAAOC,KAAKkB,GAAKpB,OAAO8B,QAAO,SAAUlB,EAAQN,GACvD,IAAIqB,EAAMP,EAAId,GAQd,OAPIyB,QAAQJ,IAAuB,kBAARA,IAAqB7B,MAAMC,QAAQ4B,GAE7Df,EAAON,GAAOV,EAAW+B,GAEzBf,EAAON,GAAOqB,EAGRf,IACLX,OAAOoB,OAAO,QA3BTD,GA8BTb,EAAQyB,UAAY,SAAUC,EAAKxC,GAClC,IAQIkB,EAzKL,SAA+BlB,GAC9B,OAAQA,EAAKoB,aACZ,IAAK,QACJ,OAAO,SAAUP,EAAK7C,EAAOyE,GAC5B,OAAiB,OAAVzE,EAAiB,CACvB+B,EAAOc,EAAKb,GACZ,IACAyC,EACA,KACCN,KAAK,IAAM,CACZpC,EAAOc,EAAKb,GACZ,IACAD,EAAO0C,EAAOzC,GACd,KACAD,EAAO/B,EAAOgC,IACbmC,KAAK,KAGT,IAAK,UACJ,OAAO,SAAUtB,EAAK7C,GACrB,OAAiB,OAAVA,EAAiB+B,EAAOc,EAAKb,GAAQ,CAC3CD,EAAOc,EAAKb,GACZ,MACAD,EAAO/B,EAAOgC,IACbmC,KAAK,KAGT,QACC,OAAO,SAAUtB,EAAK7C,GACrB,OAAiB,OAAVA,EAAiB+B,EAAOc,EAAKb,GAAQ,CAC3CD,EAAOc,EAAKb,GACZ,IACAD,EAAO/B,EAAOgC,IACbmC,KAAK,MAwIMO,CAFhB1C,EAAOF,EANQ,CACdC,QAAQ,EACRE,QAAQ,EACRmB,YAAa,QAGgBpB,IAI9B,OAAOwC,EAAMhC,OAAOC,KAAK+B,GAAKjC,OAAOpB,KAAI,SAAU0B,GAClD,IAAIqB,EAAMM,EAAI3B,GAEd,QAAYW,IAARU,EACH,MAAO,GAGR,GAAY,OAARA,EACH,OAAOnC,EAAOc,EAAKb,GAGpB,GAAIK,MAAMC,QAAQ4B,GAAM,CACvB,IAAIf,EAAS,GAUb,OARAe,EAAIS,QAAQb,SAAQ,SAAUc,QAChBpB,IAAToB,GAIJzB,EAAOzD,KAAKwD,EAAUL,EAAK+B,EAAMzB,EAAO7C,YAGlC6C,EAAOgB,KAAK,KAGpB,OAAOpC,EAAOc,EAAKb,GAAQ,IAAMD,EAAOmC,EAAKlC,MAC3C6C,QAAO,SAAUC,GACnB,OAAOA,EAAExE,OAAS,KAChB6D,KAAK,KAAO,K,gCC1MhBY,EAAOjC,QAAU,SAAUE,GAC1B,OAAOd,mBAAmBc,GAAKO,QAAQ,YAAY,SAAUyB,GAC5D,MAAO,IAAMA,EAAEC,WAAW,GAAGC,SAAS,IAAIC","file":"static/js/movies-page.45060a5a.chunk.js","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport QueryString from 'query-string';\nimport MovieList from '../../components/MovieList/MovieList';\nimport ApiService from '../../services/ApiService/ApiService';\nconst apiService = new ApiService();\nclass MoviesPage extends Component {\n  qs = QueryString.parse(this.props.location.search);\n  state = {\n    query: this.qs.query || '',\n    movies: [],\n    isLoading: false,\n  };\n  componentDidMount() {\n    if (this.state.query) {\n      this.fetchMovies();\n    }\n  }\n\n  fetchMovies = () => {\n    this.setState({ isLoading: true });\n    apiService\n      .getMoviesOnSearch(this.state.query)\n      .then(data => {\n        this.setState({\n          movies: data,\n        });\n      })\n      .catch(e => console.log(e))\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n    if (this.state.query) {\n      this.props.history.push({\n        search: `query=${this.state.query}`,\n      });\n    }\n  };\n  handleSubmit = e => {\n    e.preventDefault();\n    this.fetchMovies();\n    e.target.reset();\n  };\n  handleInputChange = e => {\n    this.setState({\n      query: e.target.value,\n    });\n  };\n\n  render() {\n    return (\n      <>\n        <form onSubmit={this.handleSubmit} className=\"searchForm\">\n          <input onChange={this.handleInputChange} className=\"input\" />\n          <button type=\"submit\" className=\"button searchBtn\">\n            Search\n          </button>\n        </form>\n        {this.state.isLoading && <p>Loading...</p>}\n        {this.state.movies.length > 0 && (\n          <MovieList\n            pathname={this.props.location.pathname}\n            query={this.state.query}\n            items={this.state.movies}\n          />\n        )}\n      </>\n    );\n  }\n}\nMoviesPage.propTypes = {\n  history: PropTypes.object,\n  location: PropTypes.object,\n  match: PropTypes.object,\n};\nexport default MoviesPage;\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\n\nexport default class ApiService {\n  getTradingMovies() {\n    return axios\n      .get('/trending/all/week?api_key=3e91b5df25eb12a3a6040f68d69bdd3f')\n      .then(response => response.data.results);\n  }\n\n  getMoviesOnSearch(query) {\n    return axios\n      .get(\n        `/search/movie?api_key=3e91b5df25eb12a3a6040f68d69bdd3f&query=${query}`,\n      )\n      .then(response => response.data.results);\n  }\n  getMovieById(movieId) {\n    return axios\n      .get(`/movie/${movieId}?api_key=3e91b5df25eb12a3a6040f68d69bdd3f`)\n      .then(response => response.data);\n  }\n  getMovieCredits(movieId) {\n    return axios\n      .get(`/movie/${movieId}/credits?api_key=3e91b5df25eb12a3a6040f68d69bdd3f`)\n      .then(response => response.data.cast);\n  }\n  getMovieReviews(movieId) {\n    return axios\n      .get(`/movie/${movieId}/reviews?api_key=3e91b5df25eb12a3a6040f68d69bdd3f`)\n      .then(response => response.data.results);\n  }\n}\n","export default __webpack_public_path__ + \"static/media/no-img.a973ad85.jpg\";","import { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport img from '../../img/no-img.jpg';\n\nconst MovieList = ({ items, query, pathname }) => {\n  return (\n    <ul className=\"previewList\">\n      {items.map(el => {\n        return (\n          <li className=\"previewItem\" key={el.id}>\n            <Link\n              className=\"previewLink\"\n              to={{\n                pathname: `/movies/${el.id}`,\n                state: {\n                  query,\n                  pathname,\n                },\n              }}\n            >\n              <div className=\"wrapper\">\n                <img\n                  className=\"previewImg\"\n                  src={\n                    el.poster_path\n                      ? `https://image.tmdb.org/t/p/w500/${el.poster_path}`\n                      : img\n                  }\n                  alt=\"\"\n                />\n                <h3>{el.title}</h3>\n              </div>\n            </Link>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nMovieList.propTypes = {\n  items: PropTypes.array,\n  query: PropTypes.string,\n  pathname: PropTypes.string,\n};\nexport default MovieList;\n","'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nexports.extract = function (str) {\n\treturn str.split('?')[1] || '';\n};\n\nexports.parse = function (str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^(\\?|#|&)/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeURIComponent(val);\n\n\t\tformatter(decodeURIComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n};\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n","'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n"],"sourceRoot":""}