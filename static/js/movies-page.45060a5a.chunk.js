(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[5],{39:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(9),i=n(11),c=n(10),o=n(0),s=n(73),u=n.n(s),f=n(46),d=n(43),l=n(1),h=new d.a,p=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).qs=u.a.parse(e.props.location.search),e.state={query:e.qs.query||"",movies:[],isLoading:!1},e.fetchMovies=function(){e.setState({isLoading:!0}),h.getMoviesOnSearch(e.state.query).then((function(t){e.setState({movies:t})})).catch((function(e){return console.log(e)})).finally((function(){e.setState({isLoading:!1})})),e.state.query&&e.props.history.push({search:"query=".concat(e.state.query)})},e.handleSubmit=function(t){t.preventDefault(),e.fetchMovies(),t.target.reset()},e.handleInputChange=function(t){e.setState({query:t.target.value})},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.state.query&&this.fetchMovies()}},{key:"render",value:function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("form",{onSubmit:this.handleSubmit,className:"searchForm",children:[Object(l.jsx)("input",{onChange:this.handleInputChange,className:"input"}),Object(l.jsx)("button",{type:"submit",className:"button searchBtn",children:"Search"})]}),this.state.isLoading&&Object(l.jsx)("p",{children:"Loading..."}),this.state.movies.length>0&&Object(l.jsx)(f.a,{pathname:this.props.location.pathname,query:this.state.query,items:this.state.movies})]})}}]),n}(o.Component);t.default=p},43:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),a=n(9),i=n(45),c=n.n(i);c.a.defaults.baseURL="https://api.themoviedb.org/3";var o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"getTradingMovies",value:function(){return c.a.get("/trending/all/week?api_key=3e91b5df25eb12a3a6040f68d69bdd3f").then((function(e){return e.data.results}))}},{key:"getMoviesOnSearch",value:function(e){return c.a.get("/search/movie?api_key=3e91b5df25eb12a3a6040f68d69bdd3f&query=".concat(e)).then((function(e){return e.data.results}))}},{key:"getMovieById",value:function(e){return c.a.get("/movie/".concat(e,"?api_key=3e91b5df25eb12a3a6040f68d69bdd3f")).then((function(e){return e.data}))}},{key:"getMovieCredits",value:function(e){return c.a.get("/movie/".concat(e,"/credits?api_key=3e91b5df25eb12a3a6040f68d69bdd3f")).then((function(e){return e.data.cast}))}},{key:"getMovieReviews",value:function(e){return c.a.get("/movie/".concat(e,"/reviews?api_key=3e91b5df25eb12a3a6040f68d69bdd3f")).then((function(e){return e.data.results}))}}]),e}()},44:function(e,t,n){"use strict";t.a=n.p+"static/media/no-img.a973ad85.jpg"},46:function(e,t,n){"use strict";var r=n(12),a=n(44),i=n(1);t.a=function(e){var t=e.items,n=e.query,c=e.pathname;return Object(i.jsx)("ul",{className:"previewList",children:t.map((function(e){return Object(i.jsx)("li",{className:"previewItem",children:Object(i.jsx)(r.b,{className:"previewLink",to:{pathname:"/movies/".concat(e.id),state:{query:n,pathname:c}},children:Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("img",{className:"previewImg",src:e.poster_path?"https://image.tmdb.org/t/p/w500/".concat(e.poster_path):a.a,alt:""}),Object(i.jsx)("h3",{children:e.title})]})})},e.id)}))})}},73:function(e,t,n){"use strict";var r=n(74),a=n(14);function i(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===typeof e?c(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=a({arrayFormat:"none"},t)),r=Object.create(null);return"string"!==typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(a),i,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[i(t,e),"[",r,"]"].join(""):[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")};case"bracket":return function(t,n){return null===n?i(t,e):[i(t,e),"[]=",i(n,e)].join("")};default:return function(t,n){return null===n?i(t,e):[i(t,e),"=",i(n,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var a=e[r];if(void 0===a)return"";if(null===a)return i(r,t);if(Array.isArray(a)){var c=[];return a.slice().forEach((function(e){void 0!==e&&c.push(n(r,e,c.length))})),c.join("&")}return i(r,t)+"="+i(a,t)})).filter((function(e){return e.length>0})).join("&"):""}},74:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}}}]);
//# sourceMappingURL=movies-page.45060a5a.chunk.js.map